<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZedCars - Complete Architecture & Role-Based Access Flow</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .header h1 {
            font-size: 2.8rem;
            color: #2c3e50;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .header .subtitle {
            font-size: 1.3rem;
            color: #7f8c8d;
            font-weight: 300;
        }
        
        .legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 15px;
            margin: 30px 0;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        }
        
        .legend-box {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .flow-section {
            margin: 30px 0;
            padding: 25px;
            border-radius: 15px;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border-left: 5px solid #3498db;
        }
        
        .flow-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .flow-path {
            display: flex;
            align-items: center;
            margin: 15px 0;
            flex-wrap: wrap;
            gap: 10px;
            padding: 15px;
            background: rgba(255,255,255,0.7);
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }
        
        .box {
            padding: 12px 18px;
            border-radius: 8px;
            font-weight: 600;
            text-align: center;
            min-width: 140px;
            font-size: 0.9rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            transition: transform 0.2s ease;
        }
        
        .box:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }
        
        .superadmin { 
            background: linear-gradient(135deg, #e74c3c, #c0392b); 
            color: white; 
        }
        
        .manager { 
            background: linear-gradient(135deg, #f39c12, #e67e22); 
            color: white; 
        }
        
        .customer { 
            background: linear-gradient(135deg, #27ae60, #2ecc71); 
            color: white; 
        }
        
        .controller { 
            background: linear-gradient(135deg, #3498db, #2980b9); 
            color: white; 
        }
        
        .model { 
            background: linear-gradient(135deg, #2ecc71, #27ae60); 
            color: white; 
        }
        
        .view { 
            background: linear-gradient(135deg, #9b59b6, #8e44ad); 
            color: white; 
        }
        
        .database { 
            background: linear-gradient(135deg, #34495e, #2c3e50); 
            color: white; 
        }
        
        .repository { 
            background: linear-gradient(135deg, #1abc9c, #16a085); 
            color: white; 
        }
        
        .jwt { 
            background: linear-gradient(135deg, #e67e22, #d35400); 
            color: white; 
        }
        
        .api { 
            background: linear-gradient(135deg, #8e44ad, #9b59b6); 
            color: white; 
        }
        
        .middleware { 
            background: linear-gradient(135deg, #95a5a6, #7f8c8d); 
            color: white; 
        }
        
        .arrow {
            font-size: 24px;
            color: #34495e;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .role-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .role-card {
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
        }
        
        .superadmin-card {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }
        
        .manager-card {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }
        
        .customer-card {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
        }
        
        .role-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .role-pages {
            list-style: none;
            padding: 0;
        }
        
        .role-pages li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            font-size: 0.95rem;
        }
        
        .role-pages li:last-child {
            border-bottom: none;
        }
        
        .mvc-flow {
            background: linear-gradient(135deg, #34495e, #2c3e50);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
        }
        
        .mvc-title {
            font-size: 1.6rem;
            text-align: center;
            margin-bottom: 25px;
            color: #ecf0f1;
        }
        
        .mvc-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .mvc-step {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .step-number {
            background: #3498db;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            margin: 0 auto 10px;
        }
        
        .architecture-summary {
            text-align: center;
            margin-top: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #34495e, #2c3e50);
            color: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        
        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .tech-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .flow-path {
                justify-content: center;
            }
            
            .box {
                min-width: 120px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöó ZedCars Complete Architecture Flow</h1>
            <p class="subtitle">Role-Based Access Control & MVC Architecture for Management Review</p>
        </div>
        
        <div class="legend">
            <div class="legend-item">
                <div class="legend-box superadmin"></div>
                <span>SuperAdmin</span>
            </div>
            <div class="legend-item">
                <div class="legend-box manager"></div>
                <span>Manager</span>
            </div>
            <div class="legend-item">
                <div class="legend-box customer"></div>
                <span>Customer</span>
            </div>
            <div class="legend-item">
                <div class="legend-box controller"></div>
                <span>Controller</span>
            </div>
            <div class="legend-item">
                <div class="legend-box repository"></div>
                <span>Repository</span>
            </div>
            <div class="legend-item">
                <div class="legend-box model"></div>
                <span>Model</span>
            </div>
            <div class="legend-item">
                <div class="legend-box view"></div>
                <span>View</span>
            </div>
            <div class="legend-item">
                <div class="legend-box database"></div>
                <span>Database</span>
            </div>
            <div class="legend-item">
                <div class="legend-box jwt"></div>
                <span>JWT Token</span>
            </div>
            <div class="legend-item">
                <div class="legend-box api"></div>
                <span>API Endpoint</span>
            </div>
            <div class="legend-item">
                <div class="legend-box middleware"></div>
                <span>Middleware</span>
            </div>
        </div>

        <!-- Role-Based Access Control -->
        <div class="flow-section">
            <div class="flow-title">
                <div class="step-number">1</div>
                üë• Role-Based Access Control Matrix
            </div>
            <div class="role-section">
                <div class="role-card superadmin-card">
                    <div class="role-title">üî¥ SuperAdmin</div>
                    <ul class="role-pages">
                        <li>‚úÖ Admin Dashboard</li>
                        <li>‚úÖ Vehicle Management (Add/Edit/Delete)</li>
                        <li>‚úÖ User Management</li>
                        <li>‚úÖ Reports & Analytics</li>
                        <li>‚úÖ Inventory Management</li>
                        <li>‚úÖ All Customer Features</li>
                        <li>‚úÖ System Configuration</li>
                        <li>‚úÖ User Activity Logs</li>
                    </ul>
                </div>
                <div class="role-card manager-card">
                    <div class="role-title">üü° Manager</div>
                    <ul class="role-pages">
                        <li>‚úÖ Admin Dashboard</li>
                        <li>‚úÖ Vehicle Management (Add/Edit/Delete)</li>
                        <li>‚úÖ Reports & Analytics</li>
                        <li>‚úÖ Inventory Management</li>
                        <li>‚úÖ All Customer Features</li>
                        <li>‚ùå User Management</li>
                        <li>‚ùå System Configuration</li>
                        <li>‚úÖ User Activity Logs</li>
                    </ul>
                </div>
                <div class="role-card customer-card">
                    <div class="role-title">üü¢ Customer</div>
                    <ul class="role-pages">
                        <li>‚úÖ Home Page</li>
                        <li>‚úÖ Vehicle Inventory (View Only)</li>
                        <li>‚úÖ Vehicle Details</li>
                        <li>‚úÖ Purchase Vehicles</li>
                        <li>‚úÖ Purchase Accessories</li>
                        <li>‚úÖ Test Drive Booking</li>
                        <li>‚úÖ My Purchases</li>
                        <li>‚úÖ About & Contact</li>
                        <li>‚ùå Admin Dashboard</li>
                        <li>‚ùå Management Features</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Authentication Flow -->
        <div class="flow-section">
            <div class="flow-title">
                <div class="step-number">2</div>
                üîê JWT-Only Authentication System
            </div>
            <div class="flow-path">
                <div class="box customer">User Login</div>
                <div class="arrow">‚Üí</div>
                <div class="box api">/api/auth/login</div>
                <div class="arrow">‚Üí</div>
                <div class="box controller">AuthController</div>
                <div class="arrow">‚Üí</div>
                <div class="box repository">AdminRepository</div>
                <div class="arrow">‚Üí</div>
                <div class="box database">Admins Table</div>
            </div>
            <div class="flow-path">
                <div class="box database">Role Validation</div>
                <div class="arrow">‚Üí</div>
                <div class="box controller">JwtService</div>
                <div class="arrow">‚Üí</div>
                <div class="box jwt">Access Token (15min)</div>
                <div class="arrow">‚Üí</div>
                <div class="box customer">localStorage</div>
            </div>
            <div class="flow-path">
                <div class="box jwt">Refresh Token (7 days)</div>
                <div class="arrow">‚Üí</div>
                <div class="box database">RefreshTokens Table</div>
                <div class="arrow">‚Üí</div>
                <div class="box customer">localStorage</div>
                <div class="arrow">‚Üí</div>
                <div class="box view">Role-Based SPA Routing</div>
            </div>
        </div>

        <!-- MVC Request Flow -->
        <div class="mvc-flow">
            <div class="mvc-title">üèóÔ∏è Complete MVC Request Flow</div>
            <div class="mvc-steps">
                <div class="mvc-step">
                    <div class="step-number">1</div>
                    <strong>HTTP Request</strong><br>
                    User clicks link/submits form
                </div>
                <div class="mvc-step">
                    <div class="step-number">2</div>
                    <strong>Routing</strong><br>
                    ASP.NET Core routes to controller
                </div>
                <div class="mvc-step">
                    <div class="step-number">3</div>
                    <strong>JWT Authorization</strong><br>
                    Bearer token validation & role check
                </div>
                <div class="mvc-step">
                    <div class="step-number">4</div>
                    <strong>Controller Action</strong><br>
                    Method executes business logic
                </div>
                <div class="mvc-step">
                    <div class="step-number">5</div>
                    <strong>Repository Call</strong><br>
                    Data access through repository
                </div>
                <div class="mvc-step">
                    <div class="step-number">6</div>
                    <strong>Entity Framework</strong><br>
                    ORM translates to SQL queries
                </div>
                <div class="mvc-step">
                    <div class="step-number">7</div>
                    <strong>MySQL Database</strong><br>
                    Data retrieved/modified
                </div>
                <div class="mvc-step">
                    <div class="step-number">8</div>
                    <strong>Model Binding</strong><br>
                    Data mapped to C# models
                </div>
                <div class="mvc-step">
                    <div class="step-number">9</div>
                    <strong>View Model</strong><br>
                    Data prepared for presentation
                </div>
                <div class="mvc-step">
                    <div class="step-number">10</div>
                    <strong>Razor View</strong><br>
                    HTML generated with data
                </div>
                <div class="mvc-step">
                    <div class="step-number">11</div>
                    <strong>HTTP Response</strong><br>
                    Complete page sent to browser
                </div>
                <div class="mvc-step">
                    <div class="step-number">12</div>
                    <strong>Client Rendering</strong><br>
                    Browser displays final page
                </div>
            </div>
        </div>

        <!-- SuperAdmin Flow -->
        <div class="flow-section">
            <div class="flow-title">
                <div class="step-number">3</div>
                üî¥ SuperAdmin Vehicle Management Flow
            </div>
            <div class="flow-path">
                <div class="box superadmin">SuperAdmin</div>
                <div class="arrow">‚Üí</div>
                <div class="box api">/api/admin/vehicles</div>
                <div class="arrow">‚Üí</div>
                <div class="box jwt">Bearer Token</div>
                <div class="arrow">‚Üí</div>
                <div class="box middleware">[Authorize(JWT, Roles="SuperAdmin,Manager")]</div>
            </div>
            <div class="flow-path">
                <div class="box controller">AdminController.AddVehicle()</div>
                <div class="arrow">‚Üí</div>
                <div class="box repository">CarRepository</div>
                <div class="arrow">‚Üí</div>
                <div class="box model">Car Model</div>
                <div class="arrow">‚Üí</div>
                <div class="box database">Cars Table</div>
            </div>
            <div class="flow-path">
                <div class="box database">Success Response</div>
                <div class="arrow">‚Üí</div>
                <div class="box api">JSON Response</div>
                <div class="arrow">‚Üí</div>
                <div class="box superadmin">SPA Update</div>
            </div>
        </div>

        <!-- Manager Flow -->
        <div class="flow-section">
            <div class="flow-title">
                <div class="step-number">4</div>
                üü° Manager Dashboard & Reports Flow
            </div>
            <div class="flow-path">
                <div class="box manager">Manager</div>
                <div class="arrow">‚Üí</div>
                <div class="box api">/api/admin/dashboard</div>
                <div class="arrow">‚Üí</div>
                <div class="box jwt">Bearer Token</div>
                <div class="arrow">‚Üí</div>
                <div class="box middleware">[Authorize(JWT, Roles="SuperAdmin,Manager")]</div>
            </div>
            <div class="flow-path">
                <div class="box controller">AdminController.Dashboard()</div>
                <div class="arrow">‚Üí</div>
                <div class="box repository">Multiple Repositories</div>
                <div class="arrow">‚Üí</div>
                <div class="box model">AdminDashboardViewModel</div>
                <div class="arrow">‚Üí</div>
                <div class="box api">JSON Response</div>
            </div>
            <div class="flow-path">
                <div class="box api">Dashboard Data</div>
                <div class="arrow">‚Üí</div>
                <div class="box manager">SPA Rendering</div>
                <div class="arrow">‚Üí</div>
                <div class="box manager">Analytics & Charts</div>
            </div>
        </div>

        <!-- Customer Flow -->
        <div class="flow-section">
            <div class="flow-title">
                <div class="step-number">5</div>
                üü¢ Customer Purchase Flow
            </div>
            <div class="flow-path">
                <div class="box customer">Customer</div>
                <div class="arrow">‚Üí</div>
                <div class="box api">/api/purchases</div>
                <div class="arrow">‚Üí</div>
                <div class="box jwt">Bearer Token</div>
                <div class="arrow">‚Üí</div>
                <div class="box middleware">[Authorize(JWT)]</div>
            </div>
            <div class="flow-path">
                <div class="box controller">HomeController.Purchase()</div>
                <div class="arrow">‚Üí</div>
                <div class="box repository">PurchaseRepository</div>
                <div class="arrow">‚Üí</div>
                <div class="box model">Purchase + PurchaseAccessory</div>
                <div class="arrow">‚Üí</div>
                <div class="box database">Purchases + PurchaseAccessoryWithCar</div>
            </div>
            <div class="flow-path">
                <div class="box database">Purchase Success</div>
                <div class="arrow">‚Üí</div>
                <div class="box api">JSON Response</div>
                <div class="arrow">‚Üí</div>
                <div class="box customer">SPA Confirmation</div>
            </div>
        </div>

        <!-- JWT API Flow -->
        <div class="flow-section">
            <div class="flow-title">
                <div class="step-number">6</div>
                üîë JWT API Authentication Flow
            </div>
            <div class="flow-path">
                <div class="box customer">API Client</div>
                <div class="arrow">‚Üí</div>
                <div class="box api">/api/auth/login</div>
                <div class="arrow">‚Üí</div>
                <div class="box controller">AuthController</div>
                <div class="arrow">‚Üí</div>
                <div class="box repository">JwtService</div>
            </div>
            <div class="flow-path">
                <div class="box jwt">Bearer Token</div>
                <div class="arrow">‚Üí</div>
                <div class="box api">/api/apicars</div>
                <div class="arrow">‚Üí</div>
                <div class="box middleware">[Authorize(JWT)]</div>
                <div class="arrow">‚Üí</div>
                <div class="box customer">JSON Response</div>
            </div>
        </div>

        <!-- Database Architecture -->
        <div class="flow-section">
            <div class="flow-title">
                <div class="step-number">7</div>
                üóÑÔ∏è Database Architecture & Relationships
            </div>
            <div class="role-section">
                <div style="background: #34495e; color: white; padding: 20px; border-radius: 12px;">
                    <div class="role-title">Core Tables</div>
                    <ul class="role-pages">
                        <li>Cars (Vehicle inventory)</li>
                        <li>Admins (Users with roles)</li>
                        <li>Purchases (Vehicle sales)</li>
                        <li>Accessories (Add-on products)</li>
                        <li>TestDrives (Booking system)</li>
                    </ul>
                </div>
                <div style="background: #8e44ad; color: white; padding: 20px; border-radius: 12px;">
                    <div class="role-title">Junction Tables</div>
                    <ul class="role-pages">
                        <li>PurchaseAccessoryWithCar</li>
                        <li>AccessoryPurchaseOnly</li>
                    </ul>
                </div>
                <div style="background: #e67e22; color: white; padding: 20px; border-radius: 12px;">
                    <div class="role-title">Security & Logging</div>
                    <ul class="role-pages">
                        <li>RefreshTokens (JWT management)</li>
                        <li>UserActivities (Audit trail)</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="architecture-summary">
            <h3>üèóÔ∏è ZedCars Technology Stack & Architecture</h3>
            <div class="tech-grid">
                <div class="tech-item">
                    <strong>Frontend</strong><br>
                    SPA with JavaScript, localStorage JWT, Bootstrap 5, GSAP
                </div>
                <div class="tech-item">
                    <strong>Backend</strong><br>
                    ASP.NET Core Web API (.NET 8), C# 12
                </div>
                <div class="tech-item">
                    <strong>Authentication</strong><br>
                    JWT Bearer Tokens Only, localStorage Storage, Role-based Authorization
                </div>
                <div class="tech-item">
                    <strong>Data Access</strong><br>
                    Entity Framework Core, Repository Pattern, Async/Await
                </div>
                <div class="tech-item">
                    <strong>Database</strong><br>
                    MySQL 8.0, Code-First Migrations
                </div>
                <div class="tech-item">
                    <strong>Security</strong><br>
                    JWT Refresh Tokens, Role-based Access Control, Audit Logging
                </div>
            </div>
            <p style="margin-top: 20px; font-size: 1.1rem;">
                <strong>Architecture Pattern:</strong> Single Page Application (SPA) with Web API Backend, JWT Authentication, and Repository Pattern
            </p>
        </div>
    </div>
</body>
</html>
